{% extends "base.html" %}

{% block scripts %}
<script src="{{url_for('.static', filename='js/cart.js')}}"></script>
{{super()}}
{% endblock %}

{% block app_content %}
<body data-minus-img="{{ url_for('static', filename='img/minus.png') }}">

<div class="container-fluid">
    <div class="row">
        <div class="col-xl">

            <div class="container-fluid">
                <div class="row">
                    {% for g in usergroups %}
                    <div class="col" style="text-align: center">{{ g.name }}</div>
                    {% endfor %}
                    <div class="w-100"></div>
                    {% for g in usergroups %}
                    {% set outer_loop = loop %}
                    <div class="col">
                        <table width="100%" cellpadding="30">
                            {% for u in g.users.all() %}
                            <tr>
                                {% if (loop.index + outer_loop.index) % 2 == 0 %}
                                <td width="100%"><a class="btn btn-block btn-green"
                                                    onclick="addToCart('{{ u.id }}', '{{ u.name }}', '{{ drink.price }}', '{{ shared }}')">{{
                                    u.name }}</a></td>
                                {% else %}
                                <td width="100%"><a class="btn btn-block btn-yellow"
                                                    onclick="addToCart('{{ u.id }}', '{{ u.name }}', '{{ drink.price }}', '{{ shared }}')">{{
                                    u.name }}</a></td>
                                {% endif %}
                            </tr>
                            {% endfor %}
                        </table>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        <div class="col-xl-3 min-width-460-md">
            {% if shared == false %}
            <a class="btn btn-block btn-grey" onclick="addToCart('0', 'Gedeeld', '{{ drink.price }}')">Gezamelijk</a>
            {% endif %}
            {% if drink.components is not none %}
            <div class="img-thumbnail" width="100%" style="font-size: 12pt">
                <table width="100%">
                    <tr>
                        <th colspan="2">Recept voor {{ drink.name }}</th>
                    </tr>
                    {% for key, value in drink.components.items() %}
                    <tr>
                        <td style="text-align: right" width="50%">{{ Product.query.get(key).name }}:</td>
                        <td style="text-align: left" width="50%">{{ value }}x</td>
                    </tr>
                    {% endfor %}
                </table>
            </div>
            {% endif %}
            {% for s in stock %}
            <div class="img-thumbnail" width="100%" style="font-size: 12pt">
                <table width="100%">
                    <tr>
                        <th colspan="2">Inventaris {% if stock|length != 1 %} {{ s.name }} {% endif %} </th>
                    </tr>
                    <tr>
                        <td style="text-align: right" width="50%">Aantal:</td>
                        <td style="text-align: left" width="50%">
                            {% if s.quantity < 0 %}<span style="color: red;">{{ s.quantity }}</span>
                            {% else %} {{ s.quantity }}
                        {% endif %} </td>
                    </tr>
                    <tr>
                        <td style="text-align: right" width="50%">DB Invoeren:</td>
                        <td style="text-align: left" width="50%">{{ s.entries }}</td>
                    </tr>
                    <tr>
                        <td style="text-align: right" width="50%">Oudste:</td>
                        <td style="text-align: left" width="50%">
                            {% if s.oldest is none %}nvt
                            {% else %}{{ s.oldest.strftime("%Y-%m-%d") }}
                        {% endif %}</td>
                    </tr>
                    <tr>
                        <td style="text-align: right" width="50%">Nieuwste:</td>
                        <td style="text-align: left" width="50%">
                            {% if s.oldest is none %}nvt
                            {% else %}{{ s.newest.strftime("%Y-%m-%d") }}
                        {% endif %}</td>
                    </tr>
                </table>
            </div>
            {% endfor %}
            <div class="img-thumbnail">
                <table id="cart" width="100%"></table>
                <a class="btn btn-block btn-grey" id="submitbutton" onclick="submitCart()" width="90%">Versturen</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}